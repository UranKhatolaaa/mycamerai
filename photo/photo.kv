#:kivy 1.0.9

<Capture>
    name: "Capture"
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        size: root.size
        BoxLayout:
            orientation: 'horizontal'
            height: '48dp'
            Label:
                text: 'Envoi de photo à la PNord'
                size_hint_y: None
                height: '48dp'
            Button:
                text: 'Options'
                size_hint_y: None
                height: '48dp'
                on_press: app.open_settings()
        Widget:
            id: proxy
            Camera:
                id: camera
                resolution: (1280,720)
                play: True
                allow_stretch: True
                keep_ratio: True
                center: self.size and proxy.center
                size: proxy.height, proxy.width
                canvas.before:
                    PushMatrix:
                    Rotate:
                        angle: -90
                        origin: self.center
                canvas.after:
                    PopMatrix:
        Button:
            text: 'Prendre photo'
            on_press: app._on_picture_taken()
            size_hint_y: None
            height: '48dp'

<Send>:
    name: "Send"
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        size: root.size
        Label:
            text: 'Envoi de photo à la PNord'
            size_hint_y: None
            height: '48dp'

        Widget:
            id: proxy
            Image:
                id: image
                size: self.texture_size
                allow_stretch: True
                keep_ratio: True
                center: self.size and proxy.center
                size: proxy.height, proxy.width

        TextInput:
            id: commentaire
            size_hint_y: None
            height: '48dp'
        Button:
            text: 'Envoyer photo'
            on_press: app.envoyer_photo()
            size_hint_y: None
            height: '48dp'

<MyPopup@Popup>:
    text: "Visages détéctés"
    Label:
        id: message
    Button:
        text: 'Ok'
        on_release: root.dismiss()
